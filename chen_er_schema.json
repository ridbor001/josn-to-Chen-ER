{
  "direction": "TB",
  "entities": [
    {
      "id": "CUSTOMER",
      "name": "客户",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "姓名" },
        { "name": "手机" },
        { "name": "客户类型" },
        { "name": "证件号" },
        { "name": "信用等级" },
        { "name": "注册日期" }
      ]
    },
    {
      "id": "VENUE",
      "name": "门店",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "名称" },
        { "name": "城市" },
        { "name": "地址" },
        { "name": "电话" },
        { "name": "状态" },
        { "name": "创建时间" }
      ]
    },
    {
      "id": "ROOM_TYPE",
      "name": "房型",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "名称" },
        { "name": "可住人数" },
        { "name": "基础月租" },
        { "name": "押金规则" },
        { "name": "面积" },
        { "name": "设备级别" }
      ]
    },
    {
      "id": "ROOM",
      "name": "房间",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "门店id" },
        { "name": "房号" },
        { "name": "房型id" },
        { "name": "楼层" },
        { "name": "状态" },
        { "name": "备注" }
      ]
    },
    {
      "id": "PACKAGE_PLAN",
      "name": "套餐",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "名称" },
        { "name": "租期类型" },
        { "name": "最短月数" },
        { "name": "含服务次数" },
        { "name": "优惠折扣" },
        { "name": "可转让" }
      ]
    },
    {
      "id": "CONTRACT",
      "name": "长包合同",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "合同编号" },
        { "name": "客户id" },
        { "name": "房间id" },
        { "name": "套餐id" },
        { "name": "起租日" },
        { "name": "到期日" }
      ]
    },
    {
      "id": "BILL",
      "name": "账单",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "合同id" },
        { "name": "账单月份" },
        { "name": "应付金额" },
        { "name": "生成时间" },
        { "name": "截止日" },
        { "name": "状态" }
      ]
    },
    {
      "id": "PAYMENT",
      "name": "收款",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "账单id" },
        { "name": "收款时间" },
        { "name": "收款方式" },
        { "name": "收款金额" },
        { "name": "收据号" },
        { "name": "经办人id" }
      ]
    },
    {
      "id": "DEPOSIT",
      "name": "押金",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "合同id" },
        { "name": "金额" },
        { "name": "收取日" },
        { "name": "退还日" },
        { "name": "状态" },
        { "name": "备注" }
      ]
    },
    {
      "id": "METER_READING",
      "name": "抄表",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "合同id" },
        { "name": "类型" },
        { "name": "月份" },
        { "name": "上期读数" },
        { "name": "本期读数" },
        { "name": "单价" }
      ]
    },
    {
      "id": "SERVICE_ORDER",
      "name": "服务工单",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "合同id" },
        { "name": "服务类型" },
        { "name": "预约时间" },
        { "name": "完成时间" },
        { "name": "状态" },
        { "name": "经办人id" }
      ]
    },
    {
      "id": "SLOT_BOOKING",
      "name": "时段预约",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "合同id" },
        { "name": "房间id" },
        { "name": "日期" },
        { "name": "开始时间" },
        { "name": "结束时间" },
        { "name": "状态" }
      ]
    },
    {
      "id": "USER",
      "name": "用户",
      "attributes": [
        { "name": "id", "isKey": true },
        { "name": "用户名" },
        { "name": "密码哈希" },
        { "name": "角色" },
        { "name": "真实姓名" },
        { "name": "电话" },
        { "name": "门店id" }
      ]
    }
  ],
  "relationships": [
    { "id": "R_SIGN",   "name": "签订",     "between": [ { "entityId": "CUSTOMER", "cardinality": "1" }, { "entityId": "CONTRACT", "cardinality": "N" } ] },
    { "id": "R_HAS",    "name": "归属",     "between": [ { "entityId": "VENUE",    "cardinality": "1" }, { "entityId": "ROOM",     "cardinality": "N" } ] },
    { "id": "R_TYPED",  "name": "类型",     "between": [ { "entityId": "ROOM_TYPE","cardinality": "1" }, { "entityId": "ROOM",     "cardinality": "N" } ] },
    { "id": "R_ASSIGN", "name": "分配",     "between": [ { "entityId": "ROOM",     "cardinality": "1" }, { "entityId": "CONTRACT", "cardinality": "N" } ] },
    { "id": "R_APPLY",  "name": "套餐适用", "between": [ { "entityId": "PACKAGE_PLAN","cardinality": "1" }, { "entityId": "CONTRACT","cardinality": "N" } ] },
    { "id": "R_GEN",    "name": "生成",     "between": [ { "entityId": "CONTRACT", "cardinality": "1" }, { "entityId": "BILL",     "cardinality": "N" } ] },
    { "id": "R_PAY",    "name": "支付",     "between": [ { "entityId": "BILL",     "cardinality": "1" }, { "entityId": "PAYMENT",  "cardinality": "N" } ] },
    { "id": "R_DEP",    "name": "押金",     "between": [ { "entityId": "CONTRACT", "cardinality": "1" }, { "entityId": "DEPOSIT",  "cardinality": "N" } ] },
    { "id": "R_READ",   "name": "抄表",     "between": [ { "entityId": "CONTRACT", "cardinality": "1" }, { "entityId": "METER_READING", "cardinality": "N" } ] },
    { "id": "R_REQ",    "name": "服务",     "between": [ { "entityId": "CONTRACT", "cardinality": "1" }, { "entityId": "SERVICE_ORDER", "cardinality": "N" } ] },
    { "id": "R_BOOK",   "name": "预约",     "between": [ { "entityId": "CONTRACT", "cardinality": "1" }, { "entityId": "SLOT_BOOKING","cardinality": "N" } ] },
    { "id": "R_EMP",    "name": "雇佣",     "between": [ { "entityId": "VENUE",    "cardinality": "1" }, { "entityId": "USER",     "cardinality": "N" } ] },
    { "id": "R_HANDLE", "name": "处理",     "between": [ { "entityId": "USER",     "cardinality": "1" }, { "entityId": "SERVICE_ORDER","cardinality": "N" } ] }
  ]
}
